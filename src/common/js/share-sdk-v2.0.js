!function(window,undefined){window.mcShare=window.mcShare||{},window.mcShare.request=window.mcShare.request||{};var wxCon={regAppId:"wxee24b820c98aec79",authAppId:"wx39ddb2e3b2dcb858"};"object"==typeof window.wxConfig?"number"==typeof window.wxConfig.length?window.wxConfig=wxCon:(window.wxConfig.regAppId=window.wxConfig.regAppId||wxCon.regAppId,window.wxConfig.authAppId=window.wxConfig.authAppId||wxCon.authAppId):window.wxConfig=wxCon,Date.prototype.format||(Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e});var split=function(e,t,n){var r={};if(e){t=t||"\n",n=n||"	";for(var a=e.split(t),o=0;o<a.length;o++){var i=a[o].split(n),s=i[0],d=i[1];if("undefined"==typeof r[s])r[s]=d;else if("string"==typeof r[s]){var c=[r[s],d];r[s]=c}else r[s].push(d)}}return r},params=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};window.mcShare.Utils={getAbsPath:function(e){var t=document.createElement("a");t.href=e;var n=t.href;return t=null,n},format:{date:function(e,t){return e?new Date(e).format(t):""}},object2param:function(e){var t=[];for(var n in e)n&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},request:{getHash:function(e){return decodeURIComponent(this.hashParams()[e])},setHash:function(){var e=arguments,t=this.hashParams();if(1===e.length)for(var n in e[0])t[n]=e[0][n];2===e.length&&(t[e[0]]=e[1]);var r=(navigator.userAgent.indexOf("Android")>-1,!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/));r?location.hash=window.mcShare.Utils.object2param(t):window.history.replaceState({},"","#"+window.mcShare.Utils.object2param(t))},delHash:function(e){var t=this.hashParams();t[e]&&(delete t[e],location.hash=window.mcShare.Utils.object2param(t))},hashParams:function(){return split(decodeURIComponent(window.location.hash.replace(/^#/gi,"")),"&","=")},getSearch:function(e){return this.searchParams()[e]},searchParams:function(){return split(decodeURIComponent(window.location.search.replace(/^\?/gi,"")),"&","=")}},stringToObj:function(e,t,n){return split(e,t,n)},getChannel:function(){for(var e=["Qzone","MicroMessenger","QQ","Weibo","MuCang"],t=window.navigator.userAgent,n=!1,r=0;r<e.length;r++)if(t.indexOf(e[r])>-1)return n=!0,"MicroMessenger"==e[r]?"weixin":e[r].toLowerCase();return n?void 0:"other"},ajax:function(e){function t(){if(200===n.status)try{e.success(JSON.parse(n.responseText))}catch(t){console.log(t)}else e.error(n.status,n.statusText)}var n=new XMLHttpRequest;e.data=params(e.data),"get"==e.method&&(e.url=-1===e.url.indexOf("?")?e.url+"?"+e.data:e.url+"&"+e.data),e.async===!0&&(n.onreadystatechange=function(){4===n.readyState&&t()}),n.open(e.method,e.url,!0),n.withCredentials=!0,n.setRequestHeader("X-Data-Type",e.dataType),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("post"===e.method?e.data:null),e.async===!1&&t()},niceTime:function(){var e;e="number"==typeof arguments[0]||"string"==typeof arguments[0]?new Date(arguments[0]):arguments[0];var t=new Date,n=(t.getTime()-e.getTime())/1e3;return 60>n?"\u521a\u521a":n>=60&&3600>n?parseInt(n/60)+"\u5206\u949f\u524d":n>=3600&&this.format.date(e,"yyyy-MM-dd")==this.format.date(t,"yyyy-MM-dd")?this.format.date(e,"HH:mm"):e.getFullYear()==t.getFullYear()?this.format.date(e,"MM-dd"):this.format.date(e,"yyyy-MM-dd")},compareVersion:function(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<Math.max(e.length,t.length);n++){if(e[n]&&t[n]&&e[n]!==t[n])return e[n]>t[n];if(!e[n])return 0>t[n];if(!t[n])return e[n]>0}return-1},sign:eval(function(e,t,n,r,a,o){if(a=function(e){return e.toString(36)},!"".replace(/^/,String)){for(;n--;)o[n.toString(t)]=r[n]||n.toString(t);r=[function(e){return o[e]}],a=function(){return"\\w+"},n=1}for(;n--;)r[n]&&(e=e.replace(new RegExp("\\b"+a(n)+"\\b","g"),r[n]));return e}('o.n=7(a){2 c=9.p(8(q m().r()*9.i()*k)).5();2 d=0;l(2 b=0;b<c.4;b++){d+=8(c[b])}2 e=7(f){6 7(g,h){6(0>=(h-""+g.4))?g:(f[h]||(f[h]=j(h+1).s(0)))+g}}([]);d+=c.4;d=e(d,3-d.5().4);6 a.5()+c+d};',29,29,"||var||length|toString|return|function|parseInt|Math|||||||||random|Array|10000|for|Date|sign|window|abs|new|getTime|join".split("|"),0,{}))},window.mcShare.pay={wxBridgeReady:function(e,t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},function(e){t&&t(e),"get_brand_wcpay_request\uff1aok"==e.err_msg})},weixin:function(e,t,n){var r=this,a=window.mcShare.Utils.request.getSearch("code");t.weixinCode=t.weixinCode||t.code||a,window.mcShare.Utils.ajax({url:e,data:t,method:"post",dataType:"json",async:!0,success:function(e){var t=e.data,a=t.content;"string"==typeof a&&(a=JSON.parse(a)),r.wxBridgeReady(a),n&&n("success",t)},error:function(){alert("\u8bf7\u6c42\u670d\u52a1\u5668\u51fa\u9519\uff01"),n&&n("error")}})}}}(window,void 0);!function(e){e.mcShare=e.mcShare||{},e._hmt=e._hmt||[];var a=e.mcShare.Utils,r=e.mcShare.request,t=e.mcShare.shareKey||a.request.getSearch("shareKey");(void 0==t||"undefined"==t||"null"==t)&&(t=""),r.shareKey=t;var n=e.mcShare.placeKey||a.request.getSearch("placeKey");(void 0==n||"undefined"==n||"null"==n)&&(n=""),r.placeKey=n||t;var o=a.getChannel();r.channel=o;var s=e.mcShare.shareWordsId||a.request.getSearch("shareWordsId");"mucang"!==o&&s||(s="");var i=e.mcShare.platform||a.request.getSearch("platform");(void 0==i||"undefined"==i||"null"==i)&&(i=-1!==e.navigator.userAgent.indexOf("Android")?"Android":-1!==e.navigator.userAgent.indexOf("iPhone")?"iPhone":-1!==e.navigator.userAgent.indexOf("Windows")?"Windows":-1!==e.navigator.userAgent.indexOf("iPad")?"iPad":"");var c=e.mcShare.shareProduct||a.request.getSearch("shareProduct")?a.request.getSearch("shareProduct"):"";r.shareProduct=c;e.mcShare.shareData||a.request.getSearch("shareData")?a.request.getSearch("shareData"):"",e.location.pathname.replace(/\/([\w-]+\.\w+)?$/gi,"/");e.mcShare.isShare=function(){return t?!0:!1},e.mcShare.Statistic={view:function(){t&&a.ajax({method:"get",data:{shareProduct:c,sharePlatform:i,shareChannel:o,shareKey:t,_r:a.sign(1)},url:e.location.protocol+"//report-share.kakamobi.cn/api/open/activity/count-pv.htm",dataType:"json",async:!0,success:function(){},error:function(){}})},event:function(r){t&&a.ajax({method:"get",data:{shareProduct:c,sharePlatform:i,shareChannel:o,shareKey:t,shareEvent:r,_r:a.sign(1)},url:e.location.protocol+"//report-share.kakamobi.cn/api/open/activity/count-event.htm",dataType:"json",async:!0,success:function(){},error:function(){}})},shipper:function(r,n){if(this.event(r),t&&"mucang"==o){var s=a.request.hashParams(),h=a.request.searchParams(),u="";if(s._appinfo){var d=JSON.parse(decodeURIComponent(s._appinfo));for(var p in d)u=p+"="+d[p]+"&"}else if(h._appName&&h._platform&&h._product)for(var m in h)u=m+"="+h[m]+"&";if(!u)return;a.ajax({method:"post",data:[{group:"h5",shareProduct:c,sharePlatform:i,shareChannel:o,shareKey:t,event:r,properties:n,timestamp:(new Date).getTime(),duration:0,_r:a.sign(1)}],url:e.location.protocol+"//oort-shipper.kakamobi.cn/api/open/receiver/send.htm?"+u,dataType:"json",async:!0,success:function(){},error:function(){}})}}},e.mcShare.Statistic.view()}(window);!function(e){e.mcShare=e.mcShare||{};var n=e.mcShare.Utils,o=e.mcShare.Statistic;e.mcShare.WX_READY=!1,e.mcShare.wxReady=[];var t=e.mcShare.wxReady.push;e.mcShare.wxReady.push=function(n){e.mcShare.WX_READY?n():t.apply(this,arguments)},e.mcShare.getJSSignObj=function(o){n.ajax({method:"get",data:{url:e.location.href.replace(/#.*/gi,""),_r:sign(1),weixinApp:e.wxConfig.regAppId},url:e.location.protocol+"//api-share-m.kakamobi.com/api/open/sign/jssign.htm",dataType:"json",async:!0,success:function(e){o(e.data)}})};var i=n.request.getSearch("placeChannel"),a={weixin_moment:"menuItem:share:timeline",weixin_friend:"menuItem:share:appMessage",sina:"",qq:"menuItem:share:qq",q_zone:"menuItem:share:QZone",qq_weibo:"menuItem:share:weiboApp"};"weixin"===e.mcShare.Utils.getChannel()&&e.mcShare.getJSSignObj(function(n){var t=n;wx&&(wx.config({debug:!1,appId:e.wxConfig.regAppId,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]}),wx.ready(function(){e.mcShare.WX_READY=!0;try{e.mcShare.ON_WX_READY()}catch(n){}i&&"undefined"!==i&&(wx.hideOptionMenu(),wx.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone"]}),wx.showMenuItems({menuList:[a[i]]}),wx.showOptionMenu()),wx.onMenuShareAppMessage({title:document.title||e.location.href,desc:document.title||e.location.href,link:e.location.href,trigger:function(){},success:function(){o.event("weixin-friend-second-share")},cancel:function(){o.event("weixin-friend-second-share")},fail:function(){o.event("weixin-friend-second-share")}}),wx.onMenuShareTimeline({title:document.title||e.location.href,desc:document.title||e.location.href,link:e.location.href,trigger:function(){},success:function(){o.event("weixin-moment-second-share")},cancel:function(){o.event("weixin-moment-second-share")},fail:function(){o.event("weixin-moment-second-share")}}),wx.onMenuShareQQ({title:document.title||e.location.href,desc:document.title||e.location.href,link:e.location.href,trigger:function(){},complete:function(){},success:function(){o.event("qq-second-share")},cancel:function(){o.event("qq-second-share")},fail:function(){o.event("qq-second-share")}}),wx.onMenuShareWeibo({title:document.title||e.location.href,desc:document.title||e.location.href,link:e.location.href,trigger:function(){},complete:function(){},success:function(){o.event("weibo-second-share")},cancel:function(){o.event("weibo-second-share")},fail:function(){o.event("weibo-second-share")}});for(var t=0;t<e.mcShare.wxReady.length;t++)e.mcShare.wxReady[t]()}))})}(window,void 0);!function(e){e.mcShare=e.mcShare||{};var n=e.mcShare.request,a=e.mcShare.Utils,r=e.mcShare.Statistic,t=document.title,c={},i=function(e){switch(e){case"weixin_moment":return"weixinMoment";case"weixin_friend":return"weixinFriend";case"sina":return"weibo";case"qq":return"qq";case"q_zone":return"qzone";case"qq_weibo":return"qqweibo";default:return"other"}},o=function(n,t){var c=n.shareWords||document.title||e.location.href,i=n.description||document.title||e.location.href,o=n.url||e.location.href,s=n.iconUrl||"",u=e.navigator.userAgent;if(o.length>1024&&u.indexOf("Mac")>-1){var h=o.split("?"),d=a.stringToObj(h[1],"&","=");d.shareData&&delete d.shareData,o=h[0]+"?"+a.object2param(d)}var p={title:c,desc:i,link:o,trigger:function(){},success:function(){t&&t("success"),r.event("weixin-friend-second-share")},cancel:function(){t&&t("error"),r.event("weixin-friend-second-share")},fail:function(){}},l={title:n.moment?i:c,desc:i,link:o,trigger:function(){},success:function(){t&&t("success"),r.event("weixin-moment-second-share")},cancel:function(){t&&t("error"),r.event("weixin-moment-second-share")},fail:function(){}},g={title:c,desc:i,link:o,trigger:function(){},success:function(){t&&t("success"),r.event("qq-second-share")},cancel:function(){t&&t("error"),r.event("qq-second-share")},fail:function(){}},m={title:c,desc:i,link:o,trigger:function(){},success:function(){t&&t("success"),r.event("weibo-second-share")},cancel:function(){t&&t("error"),r.event("weibo-second-share")},fail:function(){}};s&&(0!=s.indexOf("http")&&(s=a.getAbsPath(s)),p.imgUrl=s,l.imgUrl=s,g.imgUrl=s,m.imgUrl=s),e.mcShare.WX_READY?(wx.onMenuShareAppMessage(p),wx.onMenuShareTimeline(l),wx.onMenuShareQQ(g),wx.onMenuShareWeibo(m)):(e.mcShare.wxReady.push(wx.onMenuShareAppMessage.bind(wx.onMenuShareAppMessage,p)),e.mcShare.wxReady.push(wx.onMenuShareTimeline.bind(wx.onMenuShareTimeline,l)),e.mcShare.wxReady.push(wx.onMenuShareQQ.bind(wx.onMenuShareQQ,g)),e.mcShare.wxReady.push(wx.onMenuShareWeibo.bind(wx.onMenuShareWeibo,m)))},s=function(e,n,r,t){switch(e){case"weixin":o(n,t);break;case"mucang":var c=document.createElement("div"),i=document.createEvent("HTMLEvents");c.addEventListener("click",function(){a.request.setHash({shareData:r})},!1),i.initEvent("click",!1,!0),setTimeout(function(){c.dispatchEvent(i)},1e3);break;default:n.shareWords&&(document.title=n.shareWords)}};e.onMucangShare=function(n,a,r,t){var r=i(r);switch(n){case"click":e.Message.trigger("click",!1,a);break;case"channel":e.Message.trigger("channel",!1,a,r);break;case"success":"data"===t?e.Message.trigger("dataSuccess",!1,a):"channel"===t&&(e.Message.trigger(r+"Success",!1,a),e.Message.trigger("channelSuccess",!1,a,r));break;case"error":"data"===t?e.Message.trigger("dataError",!1,a):"channel"===t&&(e.Message.trigger(r+"Error",!1,a),e.Message.trigger("channelError",!1,a,r));break;case"cancel":e.Message.trigger("shareCancel",!1,a,r)}},e.mcShare.getAppInfo=function(){var n=a.getChannel(),r=e.navigator.userAgent,t={appName:"",version:"",isMucang:!1},c=[];switch(n){case"mucang":t.isMucang=!0,c=/(MuCang)\s*\((\w+);\s*([\d\.]+);\s*\w+\s*\)/gi.exec(r),c?(t.appName=c[2],t.version=c[3]):(c=/(MuCang)\s*(\w+)\s*/gi.exec(r),c&&(t.appName=c[2]));break;case"qq":c=/(QQ)\/([\d\.]+)\s./gi.exec(r),c&&(t.appName=c[1],t.version=c[2]);break;case"weixin":c=/(MicroMessenger)\/([\d\.]+)[\s_]/gi.exec(r),c&&(t.appName=c[1],t.version=c[2]);break;case"weibo":c=/__(weibo)__([\d\.]+)__/g.exec(r),c&&(t.appName=c[1],t.version=c[2]);break;case"qzone":c=/(Qzone)\/\w+_([\d\.]+)_/g.exec(r),c&&(t.appName=c[1],t.version=c[2])}return t.shareKey=e.mcShare.request.shareKey,t.product=e.mcShare.request.shareProduct,t},e.mcShare.weixinAuthBase=function(n){var r=decodeURIComponent(e.location.href),t=decodeURIComponent(e.location.hash),c={appid:"wx39ddb2e3b2dcb858",redirect_uri:r.replace(t,""),response_type:"code",scope:"snsapi_base",state:t.replace("#","")},i=a.request.getSearch("code");i&&"undefined"!=i?(e.location.hash=a.request.getSearch("state"),a.ajax({method:"get",data:{code:i,weixinApp:c.appid,_r:sign(1)},url:e.location.protocol+"//api-share-m.kakamobi.com/api/open/sign/token.htm",dataType:"json",async:!0,success:function(e){n(e.data)},error:function(){n("error")}})):e.location="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+c.appid+"&redirect_uri="+encodeURIComponent(c.redirect_uri)+"&response_type="+c.response_type+"&scope="+c.scope+"&state="+encodeURIComponent(c.state)+"#wechat_redirect"},e.mcShare.weixinAuth=function(n,r,t){r="wx39ddb2e3b2dcb858";var c=decodeURIComponent(e.location.href),i=decodeURIComponent(e.location.hash),o={appid:r,redirect_uri:c.replace(i,""),response_type:"code",scope:"snsapi_userinfo",state:i.replace("#","")},s=a.request.getSearch("code");s&&"undefined"!=s?(e.location.hash=a.request.getSearch("state"),a.ajax({method:"get",data:{code:s,weixinApp:r,_r:sign(1)},url:t||e.location.protocol+"//api-share-m.kakamobi.com/api/open/sign/read-user-info.htm",dataType:"json",async:!0,success:function(e){n(e.data)},error:function(){n("error")}})):e.location="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o.appid+"&redirect_uri="+encodeURIComponent(o.redirect_uri)+"&response_type="+o.response_type+"&scope="+o.scope+"&state="+encodeURIComponent(o.state)+"#wechat_redirect"},e.mcShare.shareWord=function(r,i,o){if("object"==typeof r)if("mucang"!==n.channel&&"weixin"==n.channel){var u=r.shareKey&&r.placeKey||n.placeKey;a.ajax({url:e.location.protocol+"//share.kakamobi.cn/api/h5/new-share/get-share.htm",data:{shareData:JSON.stringify(r),_productCategory:r.shareProduct||n.shareProduct,channel:r.channel||n.channel,placeKey:u},method:"post",dataType:"json",async:!0,success:function(e){e.data&&(c=e.data),s(n.channel,c,JSON.stringify(c),o)}})}else t=document.title,c=r,s(n.channel,c,JSON.stringify(c),o);else t=document.title,c=i||c,c.shareWords=r,c.iconUrl&&0!=c.iconUrl.indexOf("http")&&(c.iconUrl=a.getAbsPath(c.iconUrl)),s(n.channel,c,JSON.stringify(c),o)},e.mcShare.recoverTitle=function(){document.title=t}}(window,void 0);!function(e){var s="Share-Message-global",t=function(e){var t="",n="";return e=e.split("."),e.length>1?(t=e.pop(),n=e.splice(0,e.length>1?e.length-1:1).join(".")):n=e.join("."),{namespace:t||s,name:n}},n=function(){this.events={},this.history=[]};n.prototype={on:function(e,s){e=e.split(/\s/g);for(var n=0;n<e.length;n++){var a=t(e[n]);this.events[a.namespace]?this.events[a.namespace][a.name]?this.events[a.namespace][a.name].push(s):this.events[a.namespace][a.name]=[s]:(this.events[a.namespace]={},this.events[a.namespace][a.name]=[s]);var i=this.history.indexOf(e[n]);if(i>-1){this.trigger(this.history[i]);for(var n=0;n<this.history.length;n++)e[n]===this.history[n]&&(this.history.splice(n,1),n--)}}return this},off:function(e,s){e=e.split(/\s/g);for(var n=0;n<e.length;n++){var a=t(e[n]);if(a.name)if(s){if(this.events[a.namespace]){var i=this.events[a.namespace][a.name];if(i)for(var n=0;n<i.length;n++)i===s&&this.events[a.namespace][a.name].splice(n,1)}}else this.events[a.namespace]&&delete this.events[a.namespace][a.name];else delete this.events[a.namespace]}return this},has:function(e,s){e=e.split(/\s/g);for(var n=0;n<e.length;n++){var a=t(e[n]);if(!a.name)return!0;if(s){if(this.events[a.namespace]){var i=this.events[a.namespace][a.name];if(i)for(var n=0;n<i.length;n++)if(i===s)return!0}}else if(this.events[a.namespace])return!0}return!1},trigger:function(e,s){e=e.split(/\s/g);for(var n=0;n<e.length;n++){var a=arguments,i=[],r=t(e[n]);s||(s=!1);for(var n=2;n<a.length;n++)i.push(a[n]);if(r.name)if(this.events[r.namespace]){var h=this.events[r.namespace][r.name];if(h)for(var n=0;n<h.length;n++)h[n].apply(h[n],i);else s&&this.history.push(e[n])}else s&&this.history.push(e[n]);else{var o=this.events[r.namespace];for(var p in o){var h=o[p];if(h.length>0)for(var n=0;n<h.length;n++)h[n].apply(h[n],i);else s&&this.history.push(e[n])}}}return this},constructorNameSpace:"Simple.core.Message"},n.prototype.constructor=n,e.Message=new n}(window,void 0);